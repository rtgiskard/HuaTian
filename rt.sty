% <<< declaration
% rt.sty
% define style for rt
% to be done ..
% by giskard, Sun Oct 29 CST 2017
% >>>

\ProvidesPackage{rt}
% <<< packages
\usepackage{fontspec}									% 字体处理
%\usepackage{xpinyin}									% 汉字拼音处理
\usepackage{xeCJK}										% 中文基本环境
\usepackage[UTF8,fontset=none,heading=true]{ctex}		% ctex 中文宏包，定义中文风格
\usepackage{multicol}									% 分栏
%\usepackage{fancyhdr}									% 页眉页脚
\usepackage{titlesec}									% 章节目录样式
\usepackage{ifthen,ifthenx}								% 条件判断，方便定义
%\usepackage{syntonly,showframe}						% 检查语法，显示页面布局（诊断）
%\usepackage{lipsum}									% 生成随机文本
\usepackage{geometry,graphicx,xcolor}					% 基本页面布局及图形处理
%\usepackage{amsmath,amsfonts,amssymb}					% 数学环境基本工具包
%\usepackage{physics,bm,siunitx}						% 一些标准单位和数学记法
%\usepackage{enumitem,listings}							% list 环境
%\usepackage{tabu,longtable,multirow}					% 增强表格环境
\usepackage{float,caption,subfig,wrapfig}				% 浮动体，图片处理
%\usepackage{pdfpages}									% pdf 嵌入处理
%\usepackage{tikz}										% tikz 绘图
\usepackage[unicode]{hyperref}							% pdf 标签索引之类
% >>>


% 一些基于个人习惯的设定
% <<<1 catcode
% \catcode`\[char]=[num]
% \catcode`\_=11  % \message{adding '_' to letter set}
\def \mathsub [#1]{
	\ifthenelse{ \equal{on}{#1} }{ \catcode`\_=8 }{ \catcode`\_=11 }
}

% <<<1 关闭下划线的数学用法，方便使用我的命名风格
\mathsub[off]

% <<<1 字体
% rt_fonts_def [opts]main mono sans
\def \rt_fonts_def [#1]#2#3#4[#5][#6]{

	\setCJKmainfont[#1]{#2}
	\setCJKmonofont[#1]{#3}
	\setCJKsansfont[#1]{#4}

	\ifthenelse{ \equal{en}{#5} }{
		\setmainfont[#1]{URW Chancery L}		% 英文默认字体
		\setmonofont[#1]{Inconsolata}			% 英文等宽字体
		\setsansfont[#1]{Inconsolata}			% 英文无衬线字体
	}{ % else
		%\setmainfont{Nimbus Roman No9 L}
	}

	% \setCJKmainfont{AR PL KaitiM GB}			% 中文默认字体，文鼎简中楷
	% \setCJKmonofont{AR PL SungtiL GB}			% 中文等宽字体，文鼎简报宋
	% \setCJKsansfont{WenQuanYi Micro Hei}		% 中文无衬线字体，文泉驿微米黑

	% 设置多层备用字体
	\setCJKfallbackfamilyfont{\CJKrmdefault}[AutoFakeBold,AutoFakeSlant]{
		{AR PL New Kai}, {AR PL New Kai ExtB},
		{AR PL New Sung}, {AR PL New Sung ExtB},
		{WenQuanYi Micro Hei}, {Unifont}
	}

	\ifthenelse{ \equal{deff}{#6} }{
		% 定义新的字体族并赋名
		\newCJKfontfamily[zhkai]\kaiti{AR PL KaitiM GB}				% arphicfonts, 楷体
		\newCJKfontfamily[zhsong]\songti{AR PL SungtiL GB}			% arphicfonts, 宋体
		\newCJKfontfamily[newkai]\newkai{AR PL New Kai}			% opendesktop-fonts, 新楷
		\newCJKfontfamily[newsong]\newsong{AR PL New Sung}			% opendesktop-fonts, 新宋
		\newCJKfontfamily[newmsong]\newmsong{AR PL New Sung Mono}	% opendesktop-fonts, 新宋, mono
		\newCJKfontfamily[zhhei]\heiti{WenQuanYi Micro Hei}			% wqy-microhei, 黑体
	}{}
}


% <<<1 xecjk 选项设置
\xeCJKsetup { %⟨key 1 ⟩=⟨val 1 ⟩, ⟨key 2 ⟩=⟨val 2 ⟩, ...
	xeCJKactive=true,		% 打开对中文的特殊处理
	CJKmath=true,			% 是否支持数学环境中的 cjk 字符
	CJKspace=false,			% 忽略 cjk 文字之间的空格
	xCJKecglue=false,		% 是否对源文件中直接输入的 cjk 文字与西文之间的空格进行调整
	PunctStyle=quanjiao,	% 设置标点处理格式
	AutoFallBack=true,		% 自动启用备用字体
	AutoFakeBold=true,		% 全局设定当没有声明对应的粗体时,是否使用 伪粗体
	AutoFakeSlant=true,		% 全局设定当没有声明对应的斜体时,是否使用 伪斜体
	%EmboldenFactor=4,		% 设置伪粗体的默认粗细程度
	%SlantFactor=0.167,		% 设置伪斜体的倾斜程度,范围是 −0.999 ∼ 0.999
}

% <<<1 我的个性化设置
\def \my_style{rt}

\ifthenelse{ \equal{rt}{\my_style} }{
	% <<<2 rt style msg
	\typeout{ ******** using rt style (｡･ω･)ﾉﾞ ******** }

	% <<<2 设置字体
	\rt_fonts_def[AutoFakeBold,AutoFakeSlant]%
		{AR PL KaitiM GB}{AR PL SungtiL GB}{WenQuanYi Micro Hei}[][deff]

	% <<<2 页面布局及留白
	%\geometry{left=2.8cm,right=2.8cm,top=4cm,bottom=4.2cm}		% 页边距
	%\linespread{1.2}											% 单倍行距
	%\setlength{\baselineskip}{1.2\baselineskip}				% 改变行距的正确姿势
	%\setlength{\parskip}{1ex plus 1ex minus 0ex}				% 段间距, 0.8 - 1.4 ex 自动

	% <<<2 脚注
	\renewcommand{\thefootnote}{\roman{footnote}}
	% 2>>>
}{}
% >>>


% <<< 笔记：
% 中文环境下标点符号：
%	——：中文破折号 `shift + -'
%	……：中文省略号 `shift + 6'
% 新命令定义方法：
%	仅定义宏，以宏定义命令实现，调用宏实现具体定义
% >>>

% vi: set ft=tex ts=4 sts=4 textwidth=94 iskeyword+=_ formatoptions+=2mM :
% vi: set foldmethod=marker foldmarker=<<<,>>> autoindent readonly :
